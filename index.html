<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sorteio de Cartas - CMIM</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Animate.css -->
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style>
/* =======================
   ZOOM DAS CARTAS
======================= */
.card-zoom {
    position: relative;
    z-index: 1;
}

.card-zoom img {
    transition: transform 0.3s ease;
    transform-origin: center center;
}

.card-zoom:hover {
    z-index: 50;
}

.card-zoom:hover img {
    transform: scale(2.2);
}

/* =======================
   ESCONDER TEXTO NO ZOOM
======================= */
.card-name {
    transition: opacity 0.2s ease;
}

.card-zoom:hover .card-name {
    opacity: 0;
}

/* Container n√£o pode cortar o zoom */
.cards-container {
    overflow: visible;
}
</style>
</head>

<body class="min-h-screen flex justify-center items-center bg-white relative overflow-x-hidden">

<!-- Fundo -->
<div class="absolute inset-0 bg-[url('logo.png')] bg-center bg-cover opacity-20 -z-10"></div>

<div class="max-w-5xl w-[95%] bg-white/95 rounded-2xl border-2 border-black shadow-2xl p-8">

    <!-- T√çTULO -->
    <h1 class="text-4xl font-extrabold text-center uppercase tracking-widest mb-2">
        Sorteio de Cartas
    </h1>
    <p class="text-center text-gray-600 mb-8">
        Sistema oficial do Torneio de Cartinhas CMIM
    </p>

    <!-- CARTAS -->
    <div class="cards-container flex flex-wrap justify-center gap-4 mb-10"></div>

    <!-- RESULTADO -->
    <div class="bg-gray-100 rounded-xl border p-6 text-center mb-8">
        <div id="result" class="text-3xl font-bold mb-4">
            Clique em "Sortear"
        </div>

        <img id="resultImage"
             class="hidden mx-auto w-[180px] h-[225px] object-contain border-2 border-yellow-400 rounded-xl shadow-lg cursor-pointer transition hover:scale-110">

        <div id="history" class="text-sm text-gray-500 mt-3"></div>
    </div>

    <!-- CONTROLES -->
    <div class="text-center space-y-4">
        <label class="flex justify-center items-center gap-2 text-sm">
            <input type="checkbox" id="noRepeat" class="accent-yellow-400">
            N√£o repetir cartas
        </label>

        <button id="drawButton"
            class="px-10 py-4 bg-black text-white rounded-full font-bold uppercase tracking-wide
                   hover:bg-gray-800 hover:-translate-y-1 transition shadow-lg">
            Sortear Carta
        </button>
    </div>

    <!-- EXPLICA√á√ÉO -->
    <div class="mt-12 bg-gradient-to-br from-yellow-100 to-yellow-50 border border-yellow-400 rounded-xl p-6">
        <h2 class="text-2xl font-extrabold mb-4 text-center uppercase tracking-wide">
            üìú Como funciona o Torneio de Cartas
        </h2>

        <ul class="space-y-3 text-gray-800 text-sm leading-relaxed">
            <li>üÉè Ao inicio do torneio, cada time recebe 2 cartas, elas podem ser usadas Antes de cada sele√ß√£o de campe√£o.</li>
<li>elas podem ser usadas, uma s√≥ vez, al√©m disso, quando chegar na final, cada time ganha +2 cartas, al√©m de cartas de efeitos obrigat√≥rios, n√£o s√£o mais obrigat√≥rias</li>
<li>Quem escolhe side, joga a carta primeiro!</li>
            <li>‚öîÔ∏è Cada carta gera um <strong>efeito obrigat√≥rio</strong> dentro ou fora do jogo.</li>
            <li>üé≤ As cartas podem afetar:
                <ul class="list-disc ml-6 mt-1">
                    <li>Pick & Ban</li>
                    <li>Rotas ou fun√ß√µes</li>
                    <li>Condi√ß√µes especiais (sem flash, invade obrigat√≥ria, etc.)</li>
                </ul>
            </li>
            <li>Cartas verdes s√£o <strong>OBRIGADAS</strong> serem usadas durante o torneio.</li>
	    <li>Cartas Azuis s√£o cartas de  <strong>DEFESA</strong></li>
            <li>Cartas Vermelhas s√£o cartas de <strong>ATAQUE</strong></li>
            <li>Cartas Pretas s√£o cartas de efeito <strong>UNIVERSAL</strong> usadas para ambos os times, quando o time que tem posse, usa-la</li>
            
        </ul>

        <p class="text-center mt-4 font-bold text-yellow-700">
            CMIM n√£o √© s√≥ um torneio. √â uma experi√™ncia.
        </p>
    </div>

</div>

<!-- MODAL -->
<div id="imageModal"
     class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center">
    <div class="relative">
        <button id="closeModal"
            class="absolute -top-12 right-0 text-white text-3xl hover:text-yellow-400">
            &times;
        </button>
        <img id="modalImage"
             class="max-w-[90vw] max-h-[85vh] rounded-2xl border-4 border-yellow-400 shadow-2xl">
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

const cardData = Array.from({length:17}, (_,i)=>({
    id:i+1,
    name:`Cartinha ${String(i+1).padStart(2,'0')}`,
    image:`cartinha ${String(i+1).padStart(2,'0')}.png`
}));

let available = [...cardData];
let history = [];

const cardsContainer = document.querySelector(".cards-container");
const result = document.getElementById("result");
const resultImage = document.getElementById("resultImage");
const historyDiv = document.getElementById("history");
const modal = document.getElementById("imageModal");
const modalImage = document.getElementById("modalImage");

cardData.forEach(card => {
    const div = document.createElement("div");
    div.className =
        "card-zoom relative w-[120px] h-[150px] bg-white border-2 border-black rounded-xl cursor-pointer transition hover:-translate-y-1 hover:shadow-2xl";
    div.dataset.id = card.id;

    div.innerHTML = `
        <img src="${card.image}"
             class="w-full h-full object-contain rounded-lg">
        <div class="card-name absolute bottom-1 w-full text-center text-xs bg-white/80">
            ${card.name}
        </div>
    `;

    cardsContainer.appendChild(div);
});

document.getElementById("drawButton").onclick = () => {
    if(!available.length) available = [...cardData];

    const index = Math.floor(Math.random() * available.length);
    const drawn = available.splice(index,1)[0];

    document.querySelectorAll(".card-zoom").forEach(c => {
        c.classList.remove("border-yellow-400","bg-yellow-100");
    });

    const selected = document.querySelector(`[data-id="${drawn.id}"]`);
    selected.classList.add("border-yellow-400","bg-yellow-100");

    result.textContent = drawn.name;
    result.classList.add("animate__animated","animate__pulse");

    resultImage.src = drawn.image;
    resultImage.classList.remove("hidden");

    history.push(drawn.name);
    historyDiv.textContent =
        history.length > 1 ? "Hist√≥rico: " + history.slice(0,-1).join(", ") : "";
};

resultImage.onclick = () => {
    modalImage.src = resultImage.src;
    modal.classList.remove("hidden");
};

document.getElementById("closeModal").onclick = () =>
    modal.classList.add("hidden");

modal.onclick = e =>
    e.target === modal && modal.classList.add("hidden");

});
</script>

</body>
</html>
